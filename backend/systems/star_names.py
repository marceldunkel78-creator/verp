"""
IAU-approved Star Names für Systemnamen-Vorschläge.
Quelle: International Astronomical Union (IAU)
https://www.iau.org/public/themes/naming_stars/
"""

# Liste der IAU-genehmigten Sternnamen (Auswahl der bekanntesten)
IAU_STAR_NAMES = [
    # A
    "Acamar", "Achernar", "Achird", "Acrab", "Acrux", "Acubens", "Adhafera",
    "Adhara", "Adhil", "Agena", "Ain", "Ainalrami", "Aladfar", "Alamak",
    "Alasia", "Albaldah", "Albali", "Albireo", "Alchiba", "Alcor", "Alcyone",
    "Aldebaran", "Alderamin", "Aldhanab", "Aldhibah", "Alfirk", "Algedi",
    "Algenib", "Algieba", "Algol", "Algorab", "Alhena", "Alioth", "Alkaid",
    "Alkalurops", "Alkaphrah", "Alkes", "Almaaz", "Almach", "Alnair",
    "Alnasl", "Alnilam", "Alnitak", "Alniyat", "Alphard", "Alphecca",
    "Alpheratz", "Alrakis", "Alrescha", "Alruba", "Alsafi", "Alsciaukat",
    "Alshain", "Alshat", "Altair", "Altais", "Alterf", "Aludra", "Alula",
    "Alya", "Alzirr", "Ancha", "Angetenar", "Ankaa", "Anser", "Antares",
    "Arcturus", "Arkab", "Arneb", "Ascella", "Asellus", "Aspidiske",
    "Asterope", "Athebyne", "Atik", "Atlas", "Atria", "Avior", "Azelfafage",
    "Azha",
    
    # B
    "Barnard", "Baten", "Beemim", "Beid", "Bellatrix", "Betelgeuse",
    "Bharani", "Biham", "Botein", "Brachium",
    
    # C
    "Canopus", "Capella", "Caph", "Castor", "Castula", "Cebalrai", "Celaeno",
    "Cervantes", "Chalawan", "Chamukuy", "Chara", "Chertan", "Copernicus",
    "Cor", "Cujam",
    
    # D
    "Dabih", "Dalim", "Deneb", "Denebola", "Diadem", "Diphda", "Dschubba",
    "Dubhe", "Dziban",
    
    # E
    "Edasich", "Electra", "Elnath", "Eltanin", "Enif", "Errai",
    
    # F
    "Fafnir", "Fang", "Fawaris", "Felis", "Fomalhaut", "Fulu", "Furud",
    
    # G
    "Garnet", "Gacrux", "Giausar", "Gienah", "Ginan", "Gomeisa", "Grumium",
    
    # H
    "Hadar", "Haedus", "Hamal", "Hassaleh", "Hatysa", "Helvetios", "Heze",
    "Homam", "Hunahpu",
    
    # I-J
    "Iklil", "Intercrus", "Izar", "Jabbah", "Jishui",
    
    # K
    "Kaffaljidhma", "Kakkab", "Kang", "Kaus", "Keid", "Khambalia", "Kitalpha",
    "Kochab", "Kornephoros", "Kraz", "Kuma",
    
    # L
    "Larawag", "Lesath", "Libertas", "Lich", "Lilii", "Lionrock", "Luyten",
    
    # M
    "Maasym", "Mahasim", "Maia", "Marfak", "Marfik", "Markab", "Markeb",
    "Marsic", "Matar", "Mebsuta", "Megrez", "Meissa", "Mekbuda", "Meleph",
    "Menkalinan", "Menkar", "Menkent", "Menkib", "Merak", "Merga", "Meridiana",
    "Merope", "Mesarthim", "Miaplacidus", "Mimosa", "Minchir", "Minelauva",
    "Mintaka", "Mira", "Mirach", "Miram", "Mirfak", "Mirzam", "Misam",
    "Mizar", "Mothallah", "Muliphein", "Muphrid", "Muscida", "Musica",
    
    # N
    "Nahn", "Naos", "Nashira", "Nekkar", "Nembus", "Nihal", "Nunki", "Nusakan",
    
    # O-P
    "Ogma", "Okab", "Peacock", "Phact", "Phecda", "Pherkad", "Pleione",
    "Polaris", "Pollux", "Porrima", "Praecipua", "Prima", "Procyon", "Propus",
    
    # R
    "Ran", "Rasalas", "Rasalgethi", "Rasalhague", "Rastaban", "Regor",
    "Regulus", "Revati", "Rigel", "Rigil", "Rotanev", "Rukbat", "Ruchbah",
    
    # S
    "Sabik", "Saclateni", "Sadachbia", "Sadalbari", "Sadalmelik", "Sadalsuud",
    "Sadr", "Saiph", "Salm", "Sargas", "Sarin", "Sceptrum", "Scheat",
    "Schedar", "Secunda", "Segin", "Seginus", "Sham", "Shaula", "Shedir",
    "Sheliak", "Sheratan", "Sirius", "Situla", "Skat", "Spica", "Sualocin",
    "Subra", "Suhail", "Sulafat", "Syrma",
    
    # T
    "Tabit", "Taiyangshou", "Taiyi", "Talitha", "Tania", "Tarazed", "Taygeta",
    "Tegmine", "Tejat", "Terebellum", "Thabit", "Theemin", "Thuban", "Tiaki",
    "Tianguan", "Tianyi", "Titawin", "Toliman", "Tonatiuh", "Torcular",
    "Tureis",
    
    # U-V
    "Ukdah", "Unukalhai", "Unurgunite", "Vega", "Veritate", "Vindemiatrix",
    
    # W-Z
    "Wasat", "Wazn", "Wezen", "Wurren", "Xamidimura", "Xuange", "Yed",
    "Yildun", "Zaniah", "Zaurak", "Zavijava", "Zhang", "Zibal", "Zosma",
    "Zubenelgenubi", "Zubeneschamali",
]


def get_random_star_name():
    """Gibt einen zufälligen IAU-Sternnamen zurück."""
    import random
    return random.choice(IAU_STAR_NAMES)


def get_unused_star_name(exclude_names=None):
    """
    Gibt einen IAU-Sternnamen zurück, der noch nicht als Systemname verwendet wird.
    Falls alle Namen verwendet sind, wird ein zufälliger Name mit Suffix zurückgegeben.
    """
    from systems.models import System
    import random
    
    exclude_names = exclude_names or []
    
    # Hole alle bereits verwendeten Systemnamen
    used_names = set(System.objects.values_list('system_name', flat=True))
    used_names.update(exclude_names)
    
    # Finde verfügbare Namen
    available_names = [name for name in IAU_STAR_NAMES if name not in used_names]
    
    if available_names:
        return random.choice(available_names)
    else:
        # Falls alle Namen verwendet sind, füge Suffix hinzu
        base_name = random.choice(IAU_STAR_NAMES)
        suffix = 2
        new_name = f"{base_name} {suffix}"
        while new_name in used_names:
            suffix += 1
            new_name = f"{base_name} {suffix}"
        return new_name


def search_star_names(query):
    """Sucht in den Sternnamen nach einem Suchbegriff."""
    if not query:
        return IAU_STAR_NAMES[:20]  # Erste 20 zurückgeben
    
    query_lower = query.lower()
    matches = [name for name in IAU_STAR_NAMES if query_lower in name.lower()]
    return matches[:20]  # Max 20 Ergebnisse
